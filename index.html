<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shisha Time</title>

  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --main:#7c5cff;
      --bg:#0e0e13;
      --card:#16161f;
      --text:#ffffff;
      --muted:#b8b8d1;
      --gold:#e6c27a;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family:'Tajawal',sans-serif;
      background:linear-gradient(135deg,#1a0830,#0e0e13);
      color:var(--text);
    }

    header{
      text-align:center;
      padding:22px;
      font-size:26px;
      font-weight:800;
      color:var(--gold);
    }

    .container{
      max-width:520px;
      margin:auto;
      padding:15px;
    }

    .login{
      background:var(--card);
      padding:15px;
      border-radius:12px;
      margin-bottom:20px;
      border:1px dashed #ffffff22;
    }

    .login h3{margin:0 0 10px;color:var(--gold)}

    input{
      width:100%;
      padding:10px;
      margin-top:8px;
      border:none;
      border-radius:8px;
      font-size:14px;
    }

    .product{
      background:var(--card);
      border-radius:14px;
      padding:18px;
      margin-bottom:15px;
      border:1px solid #ffffff22;
    }

    .product h4{
      margin:0 0 8px;
      color:var(--gold);
      font-size:18px;
    }

    .product button{
      background:var(--main);
      color:#fff;
      border:none;
      padding:10px 16px;
      border-radius:10px;
      cursor:pointer;
      font-size:14px;
    }

    .cart{
      margin-top:25px;
      background:var(--card);
      padding:15px;
      border-radius:14px;
      border:1px solid #ffffff22;
    }

    .cart h3{color:var(--gold);margin-top:0}

    .checkout{
      margin-top:15px;
      background:#25d366;
      color:#000;
      border:none;
      width:100%;
      padding:14px;
      border-radius:12px;
      font-size:16px;
      font-weight:700;
      cursor:pointer;
    }
  </style>
</head>

<body>

<header>ğŸŸ¡ Shisha Time</header>

<div class="container">

  <div class="login">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
    <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
    <input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„">
  </div>

  <div id="products"></div>

  <div class="cart">
    <h3>ğŸ›’ Ø§Ù„Ø³Ù„Ø©</h3>
    <div id="cart">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</div>
    <button class="checkout" onclick="sendOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§ØªØ³Ø§Ø¨</button>
  </div>

</div>

<script>
  const API = "https://shisha-time-backend.onrender.com";
  const WHATSAPP = "00966566700298";
  let cart = [];

  async function loadProducts(){
    const res = await fetch(API + "/products");
    const products = await res.json();
    const box = document.getElementById("products");
    box.innerHTML = "";

    products.forEach(p=>{
      const div = document.createElement("div");
      div.className="product";
      div.innerHTML=`
        <h4>${p.name}</h4>
        <p>${p.price} Ø±ÙŠØ§Ù„</p>
        <button onclick="add('${p.name}',${p.price})">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
      `;
      box.appendChild(div);
    });
  }

  function add(name,price){
    cart.push({name,price});
    renderCart();
  }

  function renderCart(){
    if(cart.length===0){
      document.getElementById("cart").innerText="Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©";
      return;
    }
    let html="",total=0;
    cart.forEach(i=>{
      total+=i.price;
      html+=`<div>${i.name} - ${i.price} Ø±ÙŠØ§Ù„</div>`;
    });
    html+=`<hr>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø±ÙŠØ§Ù„`;
    document.getElementById("cart").innerHTML=html;
  }

  function sendOrder(){
    if(cart.length===0){alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");return;}
    const name=document.getElementById("name").value||"ØºÙŠØ± Ù…Ø°ÙƒÙˆØ±";
    const phone=document.getElementById("phone").value||"ØºÙŠØ± Ù…Ø°ÙƒÙˆØ±";
    let msg=`Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯\\nØ§Ù„Ø§Ø³Ù…: ${name}\\nØ§Ù„Ø¬ÙˆØ§Ù„: ${phone}\\n\\n`;
    cart.forEach(i=>msg+=`- ${i.name} (${i.price} Ø±ÙŠØ§Ù„)\\n`);
    const total=cart.reduce((s,i)=>s+i.price,0);
    msg+=`\\nØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø±ÙŠØ§Ù„`;
    window.open(`https://wa.me/${WHATSAPP}?text=${encodeURIComponent(msg)}`);
  }

  loadProducts();
</script>

</body>
</html>
